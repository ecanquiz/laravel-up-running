import{_ as s,c as i,o as a,V as e}from"./chunks/framework.D9sOcAzr.js";const E=JSON.parse('{"title":"Vincular Modelo de Ruta","description":"","frontmatter":{},"headers":[],"relativePath":"routing-and-controllers/route-model-binding.md","filePath":"routing-and-controllers/route-model-binding.md"}'),n={name:"routing-and-controllers/route-model-binding.md"},l=e(`<h1 id="vincular-modelo-de-ruta" tabindex="-1">Vincular Modelo de Ruta <a class="header-anchor" href="#vincular-modelo-de-ruta" aria-label="Permalink to &quot;Vincular Modelo de Ruta&quot;">​</a></h1><p>Uno de los patrones de enrutamiento más comunes es que la primera línea de cualquier método de controlador intenta encontrar el recurso con el ID dado, como en el ejemplo siguiente.</p><p><em>Obtener un recurso para cada ruta</em></p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;conferences/{id}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ($id) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    $conference </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Conference</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findOrFail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">($id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>Laravel ofrece una característica que simplifica este patrón llamada <em>vínculo de modelo de ruta</em>. Esto le permite definir que un nombre de parámetro en particular (por ejemplo, <code>{conference}</code>) le indicará al solucionador de ruta que debe buscar un registro de base de datos de Eloquent con ese ID y luego pasarlo como parámetro <em>en lugar</em> de simplemente pasar el ID.</p><p>Hay dos tipos de vínculo de modelo de ruta: implícito y personalizado (o explícito).</p><h2 id="vinculacion-implicita-del-modelo-de-ruta" tabindex="-1">Vinculación Implícita del Modelo de Ruta <a class="header-anchor" href="#vinculacion-implicita-del-modelo-de-ruta" aria-label="Permalink to &quot;Vinculación Implícita del Modelo de Ruta&quot;">​</a></h2><p>La forma más sencilla de utilizar la vinculación del modelo de ruta es nombrar el parámetro de ruta con algo exclusivo de ese modelo (por ejemplo, nombrarlo <code>$conference</code> en lugar de <code>$id</code>), luego sugerir tipado de ese parámetro en el método de clausura/controlador y use el mismo nombre de variable allí. Es más fácil mostrar que describir, así que eche un vistazo al ejemplo siguiente.</p><p><em>Uso de una vinculación implícita del modelo de ruta</em></p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;conferences/{conference}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Conference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $conference) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;conferences.show&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;conference&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, $conference);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>Debido a que el parámetro de ruta (<code>{conference}</code>) es el mismo que el parámetro de método (<code>$conference</code>), y el parámetro de método está tipado con un modelo <code>Conference</code> (<code>Conference $conference</code>), Laravel ve esto como un vínculo de modelo de ruta. Cada vez que se visita esta ruta, la aplicación asumirá que lo que se pasa a la URL en lugar de <code>{conference}</code> es un ID que debe usarse para buscar una <code>Conference</code>, y luego esa instancia de modelo resultante se pasará a su clausura o método de controlador.</p><div class="info custom-block"><p class="custom-block-title">Personalización de la clave de Ruta para un Modelo Eloquent</p><p>Cada vez que se busca un modelo Eloquent a través de un segmento de URL (normalmente debido a la vinculación del modelo de ruta), la columna predeterminada por la que Eloquent lo buscará es su clave principal (ID).</p><p>Para cambiar la columna que utiliza su modelo Eloquent para las búsquedas de URL en todas sus rutas, agregue un método a su modelo llamado <code>getRouteKeyName()</code>:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getRouteKeyName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;slug&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></div><p>Ahora, una URL como <code>conferences/{conference}</code> esperará obtener una entrada de la columna <code>slug</code> en lugar del <code>id</code> y realizará sus búsquedas en consecuencia.</p><div class="info custom-block"><p class="custom-block-title">Personalización de la Clave de Ruta en una Ruta Específica</p><p>En Laravel, también puedes cambiar la clave de ruta en una ruta específica en lugar de globalmente agregando dos puntos y el nombre de la columna en la definición de la ruta:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;conferences/{conference:slug}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Conference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $conference) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;conferences.show&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            -&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;conference&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, $conference);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span></code></pre></div></div><p>Si tienes dos segmentos dinámicos en tu URL (por ejemplo: <code>organizers/{organizer}/conferences/{conference:slug)</code>, Laravel intentará automáticamente limitar las consultas del segundo modelo a solo aquellas relacionadas con el primero. Por lo tanto, comprobará si el modelo <code>Organizer</code> tiene una relación <code>conferences</code> y, si existe, solo devolverá las <code>Conferences</code> que estén asociadas con el <code>Organizer</code> encontrado por el primer segmento.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> App\\Models\\Conference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> App\\Models\\Organizer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;organizers/{organizer}/conferences/{conference:slug}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Organizer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $organizer, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Conference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $conference) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $conference;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h2 id="vinculacion-personalizada-del-modelo-de-ruta" tabindex="-1">Vinculación Personalizada del Modelo de Ruta <a class="header-anchor" href="#vinculacion-personalizada-del-modelo-de-ruta" aria-label="Permalink to &quot;Vinculación Personalizada del Modelo de Ruta&quot;">​</a></h2><p>Para configurar manualmente los vínculos del modelo de ruta, agregue una línea como la del ejemplo siguiente al método <code>boot()</code> en <code>App\\Providers\\RouteServiceProvider</code>.</p><p><em>Agregar un vínculo de modelo de ruta</em></p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> boot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Perform the binding</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;event&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Conference</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>Ahora ha especificado que siempre que una ruta tenga un parámetro en su definición llamado <code>{event}</code>, como se muestra en el ejemplo siguiente, el solucionador de ruta devolverá una instancia de la clase <code>Conference</code> con el ID de ese parámetro de URL.</p><p><em>Uso de un vínculo de modelo de ruta explícito</em></p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Route</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;events/{event}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Conference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $event) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> view</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;events.show&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;event&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, $event);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div>`,23),t=[l];function p(o,h,d,r,k,c){return a(),i("div",null,t)}const g=s(n,[["render",p]]);export{E as __pageData,g as default};
